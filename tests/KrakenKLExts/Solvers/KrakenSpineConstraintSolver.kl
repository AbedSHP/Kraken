require Kraken;
require InlineDrawing;

object SpineConstraintSolver : KrakenSolver {
  Boolean debug;
};


// Default Constructor
inline SpineConstraintSolver() {
  this.debug = false;
}


// Return Arguments for Kraken
function KrakenSolverArg[] SpineConstraintSolver.getArguments(){
  KrakenSolverArg args[];
  args.push(KrakenSolverArg('debug', 'in', 'Boolean'));
  args.push(KrakenSolverArg('bone01Constrainer', 'in', 'Mat44'));
  args.push(KrakenSolverArg('bone02Constrainer', 'in', 'Mat44'));
  args.push(KrakenSolverArg('bone03Constrainer', 'in', 'Mat44'));
  args.push(KrakenSolverArg('bone04Constrainer', 'in', 'Mat44'));
  args.push(KrakenSolverArg('bone01Deformer', 'io', 'Mat44'));
  args.push(KrakenSolverArg('bone02Deformer', 'io', 'Mat44'));
  args.push(KrakenSolverArg('bone03Deformer', 'io', 'Mat44'));
  args.push(KrakenSolverArg('bone04Deformer', 'io', 'Mat44'));
  return args;
}


// Solve
function SpineConstraintSolver.solve!
(
  in Boolean debug,
  in Mat44 bone01Constrainer,
  in Mat44 bone02Constrainer,
  in Mat44 bone03Constrainer,
  in Mat44 bone04Constrainer,
  io Mat44 bone01Deformer,
  io Mat44 bone02Deformer,
  io Mat44 bone03Deformer,
  io Mat44 bone04Deformer
  )
{
  this.debug = debug;

  bone01Deformer = bone01Constrainer;
  bone02Deformer = bone02Constrainer;
  bone03Deformer = bone03Constrainer;
  bone04Deformer = bone04Constrainer;

  // Debugging
  if (this.debug) {
    // Do debugging here.
  }

}